
; Allocate 16 bytes on heap
HBIOS F6 00 00 00 00 10
./expect 1 "Ret AF: 0x00"

;Capture Block address
`BLCK1=$(grep -i "Ret HL: 0x...." /tmp/rcoutput.txt | cut -d "x" -f 2)
`echo "Memory was allocated at 0x${BLCK1}"
./expect 1 "Ret HL: 0x${BLCK1}"
./clear

; Release memory
HBIOS F7 00 00 00 ${BLCK1:0:2} ${BLCK1:2:2}
./expect 1 "Ret AF: 0x00"
./clear


; HBIOS RESWARM
HBIOS F0 01
./expect 1 "ZSDOS v1.1, 54.0K TPA"
./clear

; Release memory
HBIOS F7 00 00 00 ${BLCK1:0:2} ${BLCK1:2:2}
./expect 1 "Ret AF: 0xFF"
./clear



; Allocate 16 bytes on heap
HBIOS F6 00 00 00 00 10
./expect 1 "Ret AF: 0x00"
`BLCK2=$(grep -i "Ret HL: 0x...." /tmp/rcoutput.txt | cut -d "x" -f 2)
`echo "Memory was allocated at 0x${BLCK2}"
./expect 1 "Ret HL: 0x${BLCK1}"
./expect 1 "Ret HL: 0x${BLCK2}"
./clear
